name: 'Invite a list of users to a GitHub Organization'

inputs:
  admin-pat:  
    description: 'A personal access token with [admin:org] scope'
    required: true
  org:
    description: 'The name of the organization to create the team in'
    required: true
  name:
    description: 'The name of the team to create'
    required: true

runs:
  using: "composite"
  steps:
    - name: Print details
      shell: bash
      run: echo "Creating team $TEAM to organization $ORG"
      env:
        ORG: ${{ inputs.org }}
        TEAM: ${{ inputs.name }}
        
    - name: Invite users
      uses: actions/github-script@v7
      with:
        github-token: ${{ inputs.admin-pat }}
        script: |
          const users = '${{ inputs.users }}'.split(',');
          const org = '${{ inputs.org }}';
          const team-name = '${{ inputs.name }}';
          
          # Create a GitHub team
          const team = await github.rest.teams.create({
            org: org,
            name: team-name
          });